<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Editor de Texto - DOM y JavaScript</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>
        .active-style {
            background-color: #28a745 !important;
            border-color: #28a745 !important;
        }
        #editorTexto {
            font-family: sans-serif; 
            transition: font-size 0.1s ease-in-out; 
        }
    </style>
</head>
<body>
    <div class="container my-1 my-sm-2 my-md-4 my-lg-5">
        <h1>Editor de Texto</h1>
        <div class="card">
            <div class="card-body">
                <h2>Texto</h2>

                <p class="texto" id="texto">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec elementum auctor libero, vel imperdiet est. Etiam blandit facilisis ex, nec cursus metus pharetra quis. Fusce imperdiet nisl nibh, ac aliquet ante elementum vitae.</p>

                <hr class="hr">

                <h2>Opciones de Formato</h2>
                <div class="row">
                    <div class="col-12 col-md-3 my-1">
                        <button id="btn-negrita" class="btn d-block w-100 btn-primary" data-formato="negrita">
                            Bold (Negrita)
                        </button>
                    </div>
                    <div class="col-12 col-md-3 my-1">
                        <button id="btn-cursiva" class="btn d-block w-100 btn-primary" data-formato="cursiva">
                            Italic (Cursiva)
                        </button>
                    </div>
                    <div class="col-12 col-md-3 my-1">
                        <button id="btn-subrayado" class="btn d-block w-100 btn-primary" data-formato="subrayado">
                            Underline (Subrayado)
                        </button>
                    </div>
                    <div class="col-12 col-md-3 my-1">
                        <button id="btn-color" class="btn d-block w-100 btn-primary" data-formato="color">
                            Cambiar Color
                        </button>
                    </div>
                </div>

                <hr class="hr">

                <h2>Editar Texto</h2>
                <div class="my-3">
                    <textarea id="editorTexto" class="form-control" rows="5"></textarea>
                </div>

                <hr class="hr">

                <h2>Tamaño del Texto</h2>
                <div class="my-3">
                    <input type="range" class="form-range" id="rangoTamañoTexto" min="12" max="48" value="16">
                    <p>Tamaño actual: <span id="valorTamañoTexto">16</span>px</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script type="text/javascript">
        // Obtiene el elemento del párrafo con ID 'texto' del HTML
        const textoElement = document.getElementById('texto'); 
        // Obtiene el elemento textarea con ID 'editorTexto' del HTML
        const editorTexto = document.getElementById('editorTexto'); 
        // Obtiene el elemento input range con ID 'rangoTamañoTexto' del HTML
        const rangoTamañoTexto = document.getElementById('rangoTamañoTexto');
        // Obtiene el elemento span con ID 'valorTamañoTexto' que muestra el tamaño actual
        const valorTamañoTexto = document.getElementById('valorTamañoTexto');

        // Copia el contenido del párrafo al textarea para que el usuario pueda editarlo
        editorTexto.value = textoElement.textContent;
        
        // Establece el tamaño de fuente inicial del textarea igual al valor del rango (16px)
        editorTexto.style.fontSize = rangoTamañoTexto.value + 'px';

        // Función que alterna (toggle) el estilo negrita en el texto
        function funcionNegrita() {
            // Agrega o quita la clase 'fw-bold' (Bootstrap para texto en negrita)
            textoElement.classList.toggle('fw-bold'); 
            // Agrega o quita la clase 'active-style' al botón para cambiar su color (verde)
            document.getElementById('btn-negrita').classList.toggle('active-style');
        }

        // Función que alterna el estilo cursiva en el texto
        function funcionCursiva() {
            // Agrega o quita la clase 'fst-italic' (Bootstrap para texto en cursiva)
            textoElement.classList.toggle('fst-italic'); 
            // Agrega o quita la clase 'active-style' al botón para cambiar su color
            document.getElementById('btn-cursiva').classList.toggle('active-style');
        }
        
        // Función que alterna el estilo subrayado en el texto
        function funcionSubrayado() {
            // Agrega o quita la clase 'text-decoration-underline' (Bootstrap para subrayado)
            textoElement.classList.toggle('text-decoration-underline'); 
            // Agrega o quita la clase 'active-style' al botón
            document.getElementById('btn-subrayado').classList.toggle('active-style');
        }

        // Función que alterna el color del texto entre rojo y normal
        function funcionCambiarColor() {
            // Si el color actual es rojo, lo elimina (vuelve al color original)
            if (textoElement.style.color === 'red') {
                // Limpia el estilo de color
                textoElement.style.color = ''; 
                // Quita la clase 'active-style' del botón
                document.getElementById('btn-color').classList.remove('active-style');
            } else {
                // Si el color no es rojo, lo cambia a rojo
                textoElement.style.color = 'red';
                // Agrega la clase 'active-style' al botón
                document.getElementById('btn-color').classList.add('active-style');
            }
        }

        // Función que maneja los clics en los botones de formato
        function handlerBoton(e) {
            // Obtiene el valor del atributo 'data-formato' del botón clickeado
            const funcionBoton = e.target.dataset.formato;
            // Switch que ejecuta la función correspondiente según el formato seleccionado
            switch (funcionBoton) {
                // Si el formato es 'negrita', ejecuta la función de negrita
                case 'negrita':
                    funcionNegrita();
                    break;
                // Si el formato es 'cursiva', ejecuta la función de cursiva
                case 'cursiva':
                    funcionCursiva();
                    break;
                // Si el formato es 'subrayado', ejecuta la función de subrayado
                case 'subrayado':
                    funcionSubrayado();
                    break;
                // Si el formato es 'color', ejecuta la función de cambiar color
                case 'color':
                    funcionCambiarColor();
                    break;
            }
        }

        // Evento que se dispara cuando el usuario escribe en el textarea
        editorTexto.addEventListener('input', () => {
            // Actualiza el contenido del párrafo con lo que el usuario escribe
            textoElement.textContent = editorTexto.value;
        });

        // Evento que se dispara cuando el usuario mueve el rango (slider) de tamaño
        rangoTamañoTexto.addEventListener('input', () => {
            // Obtiene el nuevo valor del rango (entre 12 y 48)
            const nuevoTamaño = rangoTamañoTexto.value;
            // Cambia el tamaño de fuente del textarea con el nuevo valor
            editorTexto.style.fontSize = nuevoTamaño + 'px';
            // Actualiza el texto que muestra el tamaño actual en pantalla
            valorTamañoTexto.textContent = nuevoTamaño; 
        });

        // Selecciona todos los botones con clase 'btn' y agrega el event listener de click
        document.querySelectorAll('button.btn').forEach(e => e.addEventListener('click', handlerBoton));
    </script>
</body>
</html>